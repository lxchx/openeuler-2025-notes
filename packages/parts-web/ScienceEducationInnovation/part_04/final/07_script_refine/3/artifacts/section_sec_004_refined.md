# 探索方向 1：异构融合运行时调度与多作业混部优化

## 1. 背景与核心痛点
在异构计算环境下，算力资源的利用与作业调度面临以下三大挑战：
- **性能非对称性**：不同模型在不同异构硬件（如 GPU、NPU）上的执行表现存在显著差异，导致多作业混部时性能难以预测。
- **成本效益差异**：在满足相同服务质量（QoS）的前提下，不同异构芯片的部署成本各异，缺乏统一的优化度量。
- **资源利用失衡**：当 GPU/NPU 处于高负载状态时，CPU 侧往往存在大量空闲算力，异构资源间的互补性未得到充分挖掘。

## 2. 核心研究目标
通过**算力运行时调度**与**合理配置策略**，实现 CPU 与 NPU 的深度融合与互补，提升大规模异构集群的整体吞吐与资源利用率。

## 3. 关键技术方案：异构感知的多作业封装与混部
针对训练场景，提出了一种结合时间维度（潮汐现象）与空间维度（异构性）的联合调度模型。

### 3.1 建模与策略
- **多维建模**：将作业的执行时间（Execution Time）与硬件异构性共同纳入建模范畴。
- **作业组视角（Job Grouping）**：打破单一作业调度的局限，从作业组维度进行资源分配，实现组内作业的并行交错执行。
- **约束管理**：引入截止时间（Deadline）约束，确保所有作业在互联网业务场景的潮汐波动下仍能按时完成。

### 3.2 算法实现
- **图匹配算法**：利用图匹配算法解决复杂的多作业调度优化问题，寻找作业与异构算力节点之间的最优映射关系。

## 4. 落地实践与效果评估
该系统已在快手千卡级集群中完成实验验证，具体性能提升如下：

| 指标 | 优化效果 |
| :--- | :--- |
| **作业完成率** | 提升 **44.7%** |
| **JCT (作业周转时间)** | 缩短近 **2 倍** |
| **资源协同** | 有效实现了 CPU 与 NPU 的算力互补 |