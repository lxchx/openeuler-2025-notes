{
  "id": "sec_5",
  "index": 4,
  "title": "关键技术一：无监督快速日志过滤",
  "time_range": "00:08:46,455 - 00:11:31,015",
  "script": "20年前可能是一些比较业余的选手，大家很分散，做一些很有趣的攻击。那么这里边我们就有三个关键技术。第一个技术就是我们怎么样去快速地用一些无监督学习的办法呢，把这个一些核心日志、可疑的日志给它找出来。就是在我们这个图上，我们之前有个挑战，就是我们数据分布极端不均匀。就在我们图上我们发现，很大一个图可能有几千万个事件，那么这里边跟攻击有关的可能就不到200个，可能就200多个。那么我们怎么样在这种几千万个事件里面，准确地把这种200多个找出来呢？我们第一步思路，这个很难，但是我们第一步思路是，我们可以发现有很多很多这种一看就跟攻击无关的事件。那我们是不是可以先把它过滤掉，然后把剩下一些难的，一些我们判断不清楚的，再由一个更强的模型去判断。这样来节省我们这个整个流程的这个算力。那么我们这里边就发现两个规律。在这个行为，第一个呢就是说，统计异常性，我们发现呢就是说，攻击有关的事件、攻击有关的这种点呢，它更在统计上更可能后异常，异常性会更高。或者说，更容易产生统计上的稀疏性。而反过来讲，如果统计上不具备这种异常性的，那它不会是攻击，如果是你常见的日志。还有一个聚合性，是为什么呢？就是说，我们发现这种攻击产生的异常，它往往在拓扑上会比较近。为什么呢？因为我渗透进去，一般会从一个后门开始渗透，我会从一个点慢慢往外扩散。所以在整个扩散的过程中，实际上我这个攻击每一步引入的这种异常，就会在拓扑上聚集起来。那么利用这个性质，我们就做了一系列的算法，那么去，在这个做了一套这种斯坦纳树的在线搜索算法，然后我们把做了一个改进，把它复杂度呢从O(N^2)降到O(N)。而且呢，在我们理论上，它的这个竞争比，就是原来近似算法的竞争比是一样的。那么时间关系，我们这里就不再讲那么多了。那么第二个，那么在这个基础上呢，我们还做了一套这种系统的这种优化。就是我们这个，在这个系统日志起来以后，我们做了一个分析的系统。这个系统的关键呢，实际上是一个一个一个cache，一个缓存系统。我们会把这个跟攻击有关的事件缓存到内存里边去。我们觉得可疑的事件缓存到内存里边去，那么在这种热数据，那么访问就很快。而一些冷数据呢，会把它卸载到硬盘上。这样呢，我既保证了数据的完整性，又能够同时在这个系统优化上降低它的开销。那么我们这个方法稍微评估了一下，我们实际上误报节点，我们误报上比现有的所有方法降低两个数量级。然后呢，我们检出率也其实比现有的方法高。因为现有的方法其实大家都在检出率上优化比较多，对这个误报率其实大家优化比较少。所以我们这边，其实不仅在高检出率的点上比他们好，而且还降低了误报率。然后我们还和深信服其实有个合作，在这个地方有个出口。那么，在深信服的系统里边发现了七个真实的攻击。",
  "summary": "面对海量日志中攻击事件极端稀疏的挑战，我们提出一种无监督快速日志过滤技术。该方法利用攻击事件在统计上的异常性和拓扑上的聚合性这两个规律，首先过滤掉大量无关事件，再用更强的模型处理可疑事件。通过改进的在线搜索算法和缓存优化，该技术在保证高检出率的同时，将误报率降低了两个数量级，并已在实际应用中得到验证。"
}