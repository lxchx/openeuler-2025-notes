### 关键技术三：低开销日志采集系统

传统的系统监控方案在采集大量数据（如操作系统运行日志）时，会给系统本身带来显著的额外开销。这主要源于两个方面：为保护监控探针免受攻击而增加的复杂保护机制，以及将所有日志集中到单一采集器处理而破坏了进程隔离。为解决此问题，我们从软件和硬件两个层面进行了优化，构建了一个低开销的日志采集系统。

#### 1. 软件优化：分片式隔离架构

传统采集器将所有进程产生的日志汇集到中心点进行统一处理，这种设计缺乏隔离性，使得攻击者可能通过影响采集器来拖慢整个系统。

我们的解决方案是提出一种新的**分片式架构**：

- **独立处理**：让每个进程使用各自的资源，独立处理其自身产生的日志。
- **资源隔离**：通过此设计，实现了进程间的有效隔离，防止了因日志采集而产生的相互干扰。

#### 2. 硬件优化：基于 DPU 的负载卸载

为了进一步降低开销，我们将监控负载与硬件结合，将其卸载到 DPU (Data Processing Unit) 上。

- **卸载监控负载**：利用 DPU 强大的处理能力来执行监控任务，从而减少主 CPU 的负担。
- **高效数据拉取**：我们优化了数据传输路径，利用 DPU 的拉取能力，以近乎零代价的方式将操作系统产生的海量运行日志快速获取到数据端。

#### 3. 成果与结论

通过软硬件协同优化，我们的日志采集系统在实现极高采集粒度的同时，保持了极低的性能开销。

- **性能开销**：即使在采集操作系统**每一个系统调用**的详尽模式下，系统整体开销仍控制在 **3% 以内**。
- **性能对比**：与主流的监控方案（如 `sysdig`、`Linux audit`）相比，我们的系统在性能开销上**降低了一个数量级**。