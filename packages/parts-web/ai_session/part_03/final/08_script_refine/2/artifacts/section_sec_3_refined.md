## 总结：MLPerf Storage 测试的关键发现与系统调优

### 核心结论：吞吐带宽决定 GPU 支持数量

在 MLPerf Storage 基准测试中，对于 U-Net 3D 和 ResNet-50 模型，JuiceFS 能够支持的 GPU 数量直接取决于其所能提供的吞吐带宽。这一测试场景主要考察了存储系统的以下几个核心能力：

- **文件并发能力**：同时处理多个文件读写请求的能力。
- **顺序读性能**：针对大/中型数据块的连续读取效率。
- **总读带宽**：系统能够提供的整体读取带宽上限。

### 系统工程视角下的性能调优

基准测试是一项系统工程，其最终性能表现依赖于系统中各个组件的协同工作。为了达到最优性能，需要关注以下关键因素：

- **系统资源**：系统内存、互联带宽及其延迟对整体吞吐性能至关重要。JuiceFS 的吞吐带宽表现与底层硬件的内存带宽大小直接相关。
- **内存拷贝开销**：内存拷贝操作会大量消耗 CPU 和内存带宽。同时，由于系统互联和内存访问的延迟，可能导致 CPU 等待，影响整体效率。

### NUMA 架构下的性能考量

在多核、多处理器的现代服务器架构中，非统一内存访问（NUMA）对性能有显著影响。

- **Go 语言的局限性**：Go 语言的运行时目前缺乏对 NUMA 架构的感知（NUMA-awareness）。这可能导致在拥有大规模核心数的系统上，其性能表现不如在核心数较少的系统上理想。
- **最佳实践**：对于多 NUMA 节点的系统，应尽量避免跨 NUMA 节点，尤其是跨 CPU 插槽（Socket）的内存访问，以防止因延迟增加而导致的性能下降。