1
00:00:00,000 --> 00:00:07,841
下面有请北京惠每云科技有限公司的高级后端工程师冯焱先生，给我们带来

2
00:00:07,841 --> 00:00:15,436
破解“医疗孤岛”，基于openEuler的新一代CDSS智能引擎的实践分享，大家欢迎。

3
00:00:15,436 --> 00:00:28,051
(音乐和掌声)

4
00:00:28,051 --> 00:00:31,931
大家好，非常荣幸能在这里给大家做一个分享。

5
00:00:32,711 --> 00:00:40,751
在分享之前，通过这个议题，大家可能不知道什么是CDSS，我先简单介绍一下。

6
00:00:40,851 --> 00:00:44,491
CDSS在医疗领域，是临床决策辅助智能系统。

7
00:00:44,491 --> 00:00:56,111
它主要面向医护人员，在他们的临床工作中，提供辅助决策的作用。

8
00:00:56,851 --> 00:01:00,021
主要做的就是AI的应用。

9
00:01:00,581 --> 00:01:10,096
因为医疗是一个非常严谨的业务场景，针对这个场景可以规范化诊疗、进行智能预警以及相关的推荐应用。

10
00:01:11,941 --> 00:01:19,760
接下来我将通过以下四个方面进行介绍。第一，针对我们医疗的业务场景，我们面临的一些困境。

11
00:01:20,001 --> 00:01:25,141
第二，针对这个困境，我们对于新一代CDSS智能引擎的构想是什么。

12
00:01:25,441 --> 00:01:39,341
第三部分的实践是基于openEuler的Intelligence知识库，这个知识库主要对应临床决策上电子病历评级相关的四级标准。

13
00:01:39,341 --> 00:01:52,516
第四部分IntelliCore是我们自研的决策引擎，主要应对的是电子病历五级、六级、七级乃至八级这种高级的决策场景。

14
00:01:54,521 --> 00:02:03,541
第一个问题，传统的CDSS，在大模型出现之前，为什么会失灵呢？它有以下几个核心的困难。

15
00:02:03,921 --> 00:02:05,761
第一个就是数据之困。

16
00:02:06,261 --> 00:02:20,241
因为CDSS所面临的医疗场景，它对接的业务系统非常多，面临着LIS、RIS、PACS，这些主要是检验系统、检查系统、护理系统、医嘱系统等等。

17
00:02:21,261 --> 00:02:33,271
这些系统厂商非常多，我们应对的业务场景也复杂，它们的数据之间有时是不协同的。其次，数据的质量，包括它的结构化、非结构化，都是没有办法保证的。

18
00:02:33,391 --> 00:02:44,751
所以在这种业务场景下，我们所面临的数据特征提取，就是NLP自然语言处理，包括通用识别、数据级的提取等，面临着非常大的困境。

19
00:02:45,411 --> 00:02:53,091
第二个是算法之困。因为我们面对了这么多的业务系统，那么我们所面临的场景也就多。

20
00:02:53,091 --> 00:03:00,221
我们面临着更多的动态临床决策，即可能随时随地产生一种新的决策场景。

21
00:03:00,381 --> 00:03:08,841
这种决策主要是应对国家性的政策，以及国外最新的论文文献所产生的新诊疗路径等。

22
00:03:08,961 --> 00:03:18,341
在这种场景下，我们往往针对不同场景，会产生一种单一、静态的规则引擎。比如有10个业务场景，就要有10个引擎来支撑。

23
00:03:18,561 --> 00:03:28,271
虽然它叫规则引擎，但它其实跟业务属性往往也是绑定的。这时我们的维护成本也就越多，我们的小模型产生的也就越多。

24
00:03:28,531 --> 00:03:45,891
协同之困，其实就是因为前面的问题，产生了协同上的问题。我们诞生了更多的后端服务，也诞生了更多的算法服务。针对这两个问题，我们的服务之间的耦合性越来越高，维护成本也越来越高，就像堆烟囱一样，越堆越高。

25
00:03:46,711 --> 00:04:07,301
在此基础之上，我们知道医院患者的数据是至关重要的，它往往是一种内网环境，数据安全、包括合规性要求也更高。然而，它的算力服务器的标准往往也不是很高。所以在这种基础之上，我们的算法、模型推理和业务系统之间的资源协调也会产生很多问题。

26
00:04:07,541 --> 00:04:12,421
那基于以上这些困难，我们能不能产生一些新的构想？

27
00:04:12,541 --> 00:04:34,701
就是原有的架构。下面这张图大概表示了我们原有的CDSS孤岛状态所应对的情况。左侧是医院对应的这些业务系统，还有非常多的业务系统没有列举，只是举例。右侧大概对应着背后支撑这个系统所需要的东西。

28
00:04:35,001 --> 00:04:54,481
它需要自然语言处理，需要通用识别，需要各种各样的模型，还需要各种各样的规则维护，包括一些其他的业务应用场景。那基于这个场景之下，我们能产生什么样的构想呢？就是能否把这种原有的功能堆砌的场景，变成一种智能融合。

29
00:04:54,721 --> 00:05:08,701
然后原有的这种堆烟囱式的架构变成一种一体化的架构。它能否替代这种单一的静态规则引擎，如何解决异构数据的知识处理，以及如何能够更好地利用GPU加速。

30
00:05:08,941 --> 00:05:21,381
基于以上思考，我们产生了一些实际的案例落地。第一个就是我刚才说的四级场景，针对openEuler Intelligence的CDSS知识库。

31
00:05:21,601 --> 00:05:41,381
知识库主要就是临床知识如何让医护人员更好地使用起来。针对传统的临床知识库，我们以前是基于老的ES架构，大家搜索一段其实就是一个分词，分词之后搜索出来的信息非常庞大，其实也做不到更好的应用。

32
00:05:41,661 --> 00:05:52,571
第二个是基于惠每IntelliCore的临床决策智能推荐核心架构，主要应对五级、六级、七级等更高级的智能决策。

33
00:05:52,651 --> 00:06:06,711
何为智能决策？就是在患者的整个诊疗过程中，基于其大量的病历信息，如入院记录、病程、手术、检验、检查、各项指标、生命体征等，

34
00:06:06,911 --> 00:06:20,681
医护人员在开立医嘱或进行检查时，我们可以针对患者的实际情况，提醒他这个医嘱不能开，是有问题的。

35
00:06:20,781 --> 00:06:29,761
这可以更好地降低医患纠纷的产生，这也是CDSS存在的核心价值。

36
00:06:30,101 --> 00:06:50,131
第三个是模型加速，主要是用了昇腾社区的开源模型、开源镜像的embedding加速，它可以达到使用NPU加速，针对我们这个国产化设备。还有一个其实没有写上，最近也在研究vNPU的切分。

37
00:06:50,391 --> 00:07:00,946
就是一块大的NPU设备，一张卡可以切分成多张卡的场景，达到资源之间不会互相抢占的模型加速作用。

38
00:07:02,931 --> 00:07:08,431
接下来简单介绍一下openEuler的Intelligence知识库的核心架构。

39
00:07:09,071 --> 00:07:24,931
可以看到下面这张图，它主要核心有四个部分。一部分是团队管理，主要做的是角色权限，针对知识库的管理。然后是知识集、资产管理，资产管理也就是我们的知识。

40
00:07:25,091 --> 00:07:43,481
我们可能有文献相关的，有检验报告相关的，有病程相关的，有疾病相关的，各种各样的数据。然后有Chunk Search，其实也就是针对我们这些原始数据进行切分，切分之后检索，是一个向量化检索的过程。

41
00:07:43,821 --> 00:07:51,741
还有一个是综合评估，可以针对我们嵌入的文本数据，评估结果的召回。

42
00:07:52,221 --> 00:08:01,236
大家知道这种算法应用时，召回率至关重要。如果召回的质量不好，那么其实是没有达到临床应用价值的。

43
00:08:02,721 --> 00:08:06,601
它是基于高斯数据库和openEuler操作系统构建的。

44
00:08:07,881 --> 00:08:25,861
接下来详细介绍一下资产管理。资产管理主要能够应对临床上各种各样复杂的数据结构，有Markdown的，有PDF的，有Word的，有各种各样的数据。针对各种各样的数据，有时还有一些扫描件，解析的难度非常大。

45
00:08:26,021 --> 00:08:32,851
针对不同的解析，它应用不同的解析策略，可以是父子架构的，也可以是链式的。

46
00:08:33,131 --> 00:08:42,811
经过解析之后，把数据进行Chunk，也就是分块，因为大模型无法吃下非常长的文本，它有上下文限制。

47
00:08:42,931 --> 00:08:48,516
Chunk之后进行向量化存储，方便我们后续的语义检索。

48
00:08:49,531 --> 00:09:01,611
检索增强主要应对的是，临床上医生可能有一些常规性的问题，针对这些问题可以进行加速和模型的重排。

49
00:09:01,811 --> 00:09:13,211
重排之后，也可以基于父子分块的检索方式，为了保证语义完整性，我们检索到子模块时，可以把它父模块也带出来。

50
00:09:13,211 --> 00:09:17,106
这样的话，就能尽可能地保持语义的完整性。

51
00:09:18,191 --> 00:09:35,761
针对它这一套核心架构，我们也做了一款商业化落地的产品，就是CDSS一体机。这个主要是应对满足四级应用场景的场景。我列举了三个商业化落地的案例。

52
00:09:35,761 --> 00:09:51,141
一个是医学的循证问答，一个是医学文献分析，还有一个是智能病例分析。医学循证问答主要指的是，大家都知道大模型存在幻觉，问的时候有时会胡说八道，但在医学场景下，胡说八道是致命的。

53
00:09:51,141 --> 00:10:02,051
所以，针对这种场景，结合我们Intelligence知识库的检索能力，再配合我们内部原有的核心知识库，就可以达到循证问答的作用。

54
00:10:02,051 --> 00:10:06,711
即回答的问题有证可依、有据可查，而不是胡说。

55
00:10:07,851 --> 00:10:21,321
另一个是医学文献分析。我们知道医学文献通常很复杂，尤其是最前沿的核心文献大多是国外的，阅读起来可能比较困难。

56
00:10:21,321 --> 00:10:33,661
上传医学文献后，系统可以通过OCR相关模型进行扫描解析，之后根据您的需求，给出整理好的答案。

57
00:10:33,961 --> 00:10:42,261
第三个是智能病例分析，即上传相关病例，可以是Excel、Word等格式。

58
00:10:42,421 --> 00:10:51,711
上传后，结合我们内部微调的模型——因为医疗场景通常无法直接使用开源模型，需要进行微调处理——

59
00:10:51,831 --> 00:10:55,616
微调后的模型可以针对更专业的场景给出回答。

60
00:10:58,751 --> 00:11:15,721
最后是IntelliCore的核心架构。它相较于传统架构有几大变更：一是文本转规则，二是文本转SQL，以满足报表类需求。

61
00:11:16,461 --> 00:11:24,401
这主要应对实时提醒的场景。此外还有新的GoRules通用规则引擎，以及惠每大模型。

62
00:11:24,941 --> 00:11:38,971
文本转规则是什么意思呢？在临床应用中，我们对实时性要求非常高，而使用大模型推理速度过慢，无法满足要求。因此，我们考虑能否基于模型来生成规则，并且是一种通用性规则。

63
00:11:39,251 --> 00:11:46,131
这种规则脱离了常规业务。针对该场景，我们开发了文本转规则的引擎服务。

64
00:11:46,291 --> 00:12:03,291
该服务结合了微调模型，当您输入一段文本描述后，模型会分析出这应该属于哪种决策场景，并最终生成一种规则产物。

65
00:12:03,591 --> 00:12:07,231
基于这种规则产物，我们开发了一款通用规则引擎。

66
00:12:07,231 --> 00:12:19,211
这个引擎脱离了所有原有的引擎，它基于一种输入输出的概念，内置了非常多的算子，且不依赖任何业务属性。

67
00:12:19,351 --> 00:12:27,861
您只需依据输入的数据，结合我们输入的rule规则，它就可以产生计算结果。

68
00:12:29,661 --> 00:12:35,381
落地后，这个引擎支持了更多的业务，我们不再需要维护大量的静态规则引擎。

69
00:12:35,561 --> 00:12:42,616
开发和维护成本也进一步降低。当然，其内部依赖的算子也非常多，这是一个比较复杂的场景。

70
00:12:44,201 --> 00:12:53,281
其落地场景我分为两部分：一是国内场景，如智能推荐、推荐评估、推荐检查、推荐治疗等；

71
00:12:53,481 --> 00:13:07,081
二是国外场景，案例主要与用药相关。目前我们正在国外推广用药场景的推荐应用，以IntelliCore为核心，这部分已在商业化落地中。

72
00:13:08,951 --> 00:13:12,741
以上就是我分享的全部内容，谢谢。

73
00:13:12,741 --> 00:13:22,241
(掌声)

74
00:13:22,241 --> 00:13:39,581
非常感谢冯老师带来的医疗行业典型案例。他提到了使用智能决策系统叠加模型RAG的方案，

75
00:13:39,581 --> 00:13:45,861
实现了一个能够读懂并连接前沿知识领域的智能大脑，这是一个非常棒的分享。

76
00:13:45,861 --> 00:13:46,401
(掌声)
